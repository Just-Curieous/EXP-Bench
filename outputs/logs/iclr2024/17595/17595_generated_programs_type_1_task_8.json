{
    "source": ["/workspace/examples/test_all_schedules.sh"], 
    "usage_instructions": "To evaluate the impact of varying Mlimit configurations on bubble rate, modify the test_all_schedules.sh script to test different memory limit settings. Specifically:\n\n1. Create a custom methods array with different memory limit configurations:\n   ```bash\n   methods=(\n       \"zb-1.5p\"\n       \"zb-2p\"\n       \"zb-2.5p\"\n       \"zb-3p\"\n   )\n   ```\n\n2. Add corresponding conditions in the if-elif block:\n   ```bash\n   if [ $method == \"zb-1.5p\" ]; then\n       export ENABLE_ZERO_BUBBLE=1\n       export ZERO_BUBBLE_MEM_LIMIT=$((15 * $PIPELINE_SIZE / 10))\n   elif [ $method == \"zb-2p\" ]; then\n       export ENABLE_ZERO_BUBBLE=1\n       export ZERO_BUBBLE_MEM_LIMIT=$((2 * $PIPELINE_SIZE))\n   elif [ $method == \"zb-2.5p\" ]; then\n       export ENABLE_ZERO_BUBBLE=1\n       export ZERO_BUBBLE_MEM_LIMIT=$((25 * $PIPELINE_SIZE / 10))\n   elif [ $method == \"zb-3p\" ]; then\n       export ENABLE_ZERO_BUBBLE=1\n       export ZERO_BUBBLE_MEM_LIMIT=$((3 * $PIPELINE_SIZE))\n   fi\n   ```\n\n3. Configure the model size and pipeline parallelism as specified in the experiment question:\n   - For a 14.6B model with p=16: Set PIPELINE_SIZE=16 and adjust LAYERS, HIDDEN_SIZE, etc.\n   - For a 28.3B model with p=32: Set PIPELINE_SIZE=32 and adjust LAYERS, HIDDEN_SIZE, etc.\n\n4. Set the appropriate microbatch size as specified (48, 64, or 128 for the 14.6B model; 96, 128, or 256 for the 28.3B model).\n\n5. Execute the script, which will run the pipeline scheduling algorithm multiple times with different memory limit configurations.\n\n6. After execution, analyze the logs in the ${LOGS_DIR}/$run/ directory to compare bubble rates across different memory limit configurations."
}